{{- if $.Site.IsServer -}}
<style>
  .xDraftButton {
    font-weight: bolder;
    color: white !important;
    background: #f36;
    padding: 0.3em 0.5em;
    border-radius: 0.5em;

    display: block;
    text-align: center;
    width: 100%;
    margin-bottom: 0.5em;
  }
</style>

<div class="xMenu_box" data-sticky>
  <h3 class="xMenu_box_title">デバッグ</h3>
  <div class="xMenu_box_body">
    <a href="/drafts/" class="xDraftButton">ドラフト記事</a>
  </div>
  <div class="xMenu_box_body">
    <form>
      <div class="xSearchBox">
        <input id="searchKeyword" type="search" name="q"
          placeholder="検索ワード" size="30" autocomplete="off"><input id="searchButton" type="submit" value="{{ emojify ":mag:" }}">
      </div>
    </form>
    <!--
    <a href="/search/" class="xDraftButton">全文検索</a>
    -->
  </div>
</div>

<script>
const SEARCH_URL = '/search/';

window.addEventListener('DOMContentLoaded', () => {
  const searchButton = document.getElementById('searchButton');
  const searchKeyword = document.getElementById('searchKeyword');

  // 検索ボタンのクリックで検索ページへジャンプ
  searchButton.addEventListener('click', e => {
    e.preventDefault();  // Prevent default form's behavior
    const query = searchKeyword.value;
    const url = query ? SEARCH_URL + '#' + query : SEARCH_URL;
    location.href = url;
  });
});

// input 要素の autofocus 属性では、
// 複数要素に設定すると動作しなくなるので JS でフォーカス
//window.addEventListener('load', () => {
//  const searchKeyword = document.getElementById('searchKeyword');
//  searchKeyword.focus();
//});
</script>
{{- end }}
